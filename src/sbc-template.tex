\documentclass[12pt]{article}

\usepackage{sbc-template}

\usepackage{graphicx,url}

\usepackage{csquotes}

%\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}


\sloppy

% SBC-Template can be found here:
% http://www.sbc.org.br/documentos-da-sbc/summary/169-templates-para-artigos-e-capitulos-de-livros/878-modelosparapublicaodeartigos
\title{Visualizando A Aplicação de Filtros de Kalman na Estabilização de Controle para Realidade Virtual}

\author{Thiago S. Figueira\inst{1}, Jorge Veiga\inst{1}, Adriano M. Gil\inst{1} }

\address{Samsung Instituto de Desenvolvimento para a Informática da Amazônia
  (SIDIA)\\
  Manaus -- AM -- Brazil
  \email{\{t.figueira,jorge.v,adriano.gil\}@samsung.com}
}

\begin{document}

\maketitle

\begin{abstract}
  This meta-paper describes the style to be used in articles and short papers
  for SBC conferences. For papers in English, you should add just an abstract
  while for the papers in Portuguese, we also ask for an abstract in
  Portuguese (``resumo''). In both cases, abstracts should not have more than
  10 lines and must be in the first page of the paper.
\end{abstract}

\begin{resumo}
  Este meta-artigo descreve o estilo a ser usado na confecção de artigos e
  resumos de artigos para publicação nos anais das conferências organizadas
  pela SBC. É solicitada a escrita de resumo e abstract apenas para os artigos
  escritos em português. Artigos em inglês deverão apresentar apenas abstract.
  Nos dois casos, o autor deve tomar cuidado para que o resumo (e o abstract)
  não ultrapassem 10 linhas cada, sendo que ambos devem estar na primeira
  página do artigo.
\end{resumo}


\section{Introdução}

% 1. Contextualizar o problema
 Muitos jogos ou aplicações sérias fazem uso de hardwares específico para possibilitar a interação do usuário, e.g, um gesto com as mãos, movimentos corporais. Sensores inerciais - tais como o acelerômetro, giroscópio e magnetómetro - medem a aplicação de força, taxa angular ou campo magnético, e podem ser usados como forma de virtualização de um evento na realidade do usuário para dentro de um cenário virtual. Assim jogadores de \textit{first person shooters} (FPS) conseguem disparar utilizando a posição de suas mãos, uma nave espacial rotaciona junto com o usuário, entre outras aplicações.


Os sensores têm a finalidade de mensurar comportamentos ou características da realidade, através de transdutores que convertem uma energia de entrada em outra de saída. Nesse processo é feita uma amostragem do evento de interesse, i.e., ocorre uma série de capturas da realidade de maneira a converter a medida de interesse em um conjunto contínuo de valores. Este processo também pode ser suscetível a erros, seja na natureza física do transdutor que não traduz fielmente os valores medidos, ou na taxa de amostragem que pode não ser suficiente para capturar a informação de interesse, ou na discretização dos valores contínuos da realidade. Somadas todas essas possibilidades, percebe-se que as informações essenciais (velocidade, temperatura, localização no GPS, etc.) podem sofrer ruídos ou imprecisão, isto é, o valor medido não reflete em sua totalidade a verdadeira condição do sistema no momento da medição.

% s exemplos de  são variados:  um pequeno robô de jardim que precisa saber sua verdadeira localização a fim de evitar quedas; um mapa de navegação para carros que, dentro de um túnel, precise cumprir sua função com precisão para guiar o motorista; ou ainda, a necessidade de conhecer-se a temperatura de um foguete cujo alto aquecimento impeça a medição direta através de um sensor. Se analisadas com cadência, as situações ilustradas possuem em comum a existência de informações essenciais (velocidade, temperatura, localização no GPS, etc.) que sofrem ruídos ou imprecisão, isto é, o valor medido não reflete em sua totalidade a verdadeira condição do sistema no momento da medição.

% A imprecisão é um problema muito comum em

% * Definição introdutória de Filtros
Desta forma, a fim de garantir o maior nível de aproximação no que se refere à confiabilidade das informações tratadas, os filtros digitais tornam-se ferramentas preciosas as quais visam garantir que somente os dados relevantes, pré-definidos a partir de condições estabelecidas pelas partes interessadas, sejam considerados, é o caso de filtros de passa-alta e passa-baixa, por exemplo. Dentre estes diferentes tipos de filtro passíveis de implementação, a solução mais apropriada para os problemas acima exemplificados é o filtro de Kalman.


Entende-se que o filtro de Kalman descreve de uma solução recursiva para o problema de filtragem de dados em um sistema dinâmico linear [1], isto é, trata-se de um sistema capaz de predizer um estado futuro baseado nas últimas informações disponíveis. Descrito como um sistema de recursivo de predição ótima [2], o filtro de Kalman é efetivamente utilizado em muitas aplicações do mundo real, uma delas foi a própria viagem do homem à Lua, quando necessitava-se estimar as trajetórias para a ida e volta deste satélite [3].   Embora extremamente eficiente e aproveitável, esta ferramenta carece de explanações mais aproximadas dos estudantes que iniciam seus estudos acerca de filtros digitais, pois abordam o tema exclusivamente do ponto de vista da mais avançada matemática. Isto, no entanto, não pode servir de como barreira que impeça o acesso à informação por parte daqueles cujos fundamentos matemáticos não sejam de todo solidificados.



% * Contextualizar a necessidade didática
%     * Dificuldade de compreensão
%     * Dificuldade de visualização
Embora extremamente eficiente e aproveitável, esta ferramenta carece de explanações mais aproximadas dos estudantes que iniciam seus estudos acerca de filtros digitais, pois abordam o tema exclusivamente do ponto de vista da mais avançada matemática. Isto, no entanto, não pode servir de como barreira que impeça o acesso à informação por parte daqueles cujos fundamentos matemáticos não sejam de todo solidificados.


% * Resumo proposta
Em última instância, a pergunta é de que maneira pode-se abstrair o problema de modo que seja possível aplicar o filtro de Kalman? Ora, a simplicidade na compreensão a respeito daquilo que o filtro faz não se reflete no entendimento de suas fórmulas, especialmente para aqueles cujos fundamentos matemáticos não sejam especialmente consolidados.  Comumente as variáveis e seus respectivos correspondentes na fórmula podem ser desconhecidos ou a má interpretação conduz a resultados inesperados. Tendo em vista aclarar o emprego do filtro de Kalman, objetiva-se aqui exemplificar seu emprego em um joystick numa aplicação de realidade virtual. O ruído está presente nas leituras acerca do posicionamento deste controlador, portanto intenta-se a melhoria no reconhecimento deste sinal.


% * Estrutura do artigo

\section{Trabalhos Relacionados} \label{sec:relatedworks}

% Alguns exemplos de aplicações
Entre alguns exemplos de aplicações genéricas dos Filtros de Kalman, temos em \cite{demkowiczkalman} a demonstração de uma aplicação em Java do Filtro de Kalman em Sistemas sondadores de multi-feixe para remover ruído na visualização 3d do fundo do mar, onde os dados de entrada são filtrados duas vezes em diferentes orientações. O filtro de Kalman tem uma grande utilidade em robótica \cite{choset2005principles}, pois normalmente o conhecimento de mundo do robô deriva de medidas fornecidas por sensores imperfeitos e ruidosos.

Alguns artigos trabalham com a filtragem de sensores baseados em acelerômetro. Em \cite{schlomer2008gesture} Usa modelo oculto de Markov para reconhecimento de gestos do usuários feitos em um Wiimote, o controle do Wii. Usa filtros simples para remover pontos que não são suficientemente significantes. \cite{shiratori2008accelerometer} Utiliza múltiplos controles de Wii para criar animações procedurais. Analisa as informações do acelerômetro do Wiimote, e aplica Filtros Kalman para remover o ruído de movimento

\section{Filtros} \label{sec:filters}
O dicionário Michaelis, dentre suas diversas definições, conceitua filtro como \enquote{o que tem a finalidade de selecionar}, contudo um olhar mais cuidadoso é capaz de navegar pelo emaranhado de palavras e identificar que um filtro essencialmente modifica de alguma forma a informação que recebe. Partido desta definição, \enquote{tudo é um filtro} [Ref1], pois os sinais sofrem interferência, portanto ruídos, dos meios externos e internos, sendo assim modificados. Para os objetivos deste texto, basta compreender um filtro como um objeto ou função cuja principal funcionalidade é remover partes indesejadas de um sinal ou ainda selecionar somente partes específicas do mesmo, como elementos que se enquadrem em determinada frequência. [Ref2] De maneira simplificada, o efetivo funcionamento de um filtro se dá conforme a ilustração:


Há outra distinção importante, citada há poucas linhas, a qual deve ser salientada sobre filtros: podem ser objetos ou funções e isto basicamente retrata a existência dos filtros digitais e analógicos. Fundamentalmente a dessemelhança ocorre nos meios sobre os quais cada filtro opera, logo não é difícil discernir que os filtros analógicos fazem uso de componentes eletrônicos, tais como resistores e capacitores, enquanto os digitais operam sobre informações computadorizadas por meio de cálculos numéricos [Ref2]. Cabe salientar, no entanto, a relação não mutuamente exclusiva, visto que se pode estabelecer uma correspondência entre ambos através do uso de conversores analógico-digital bem como digital-analógico. Tendo em vista o objetivo proposto, dar-se-á o foco aos filtros digitais.


O filtro de passa-baixa (low-pass) e passa-alta (high-pass) exemplificam da maneira mais clara possível a funcionalidade de um filtro. Os filtros low-pass permitem que as frequências abaixo da frequência de corte sejam consideradas à medida que os filtros high-pass permitem a passagem das frequências acima da base de corte. As ilustrações abaixo permitem visualizar o comportamento esperado:

% TODO

\section{Filtro de Kalman} \label{sec:kalmanfilter}
Apresentado no ano de 1960 pelo criador de mesmo nome, o filtro de Kalman é um poderoso conjunto de operações as quais permitem estimar, a partir de dados ruidosos ou de pouca confiabilidade, um estado passado, presente ou futuro [1], desde que estes sejam ruídos gaussianos.  Trata-se do melhor filtro para um sistema linear [2a][3], sendo, portanto, retratado como um filtro recursivo ótimo.


No entanto, deve-se compreender primeiramente o que significa, neste contexto, um filtro ótimo e recursivo: filtro descreve um algoritmo de processamento de dados capaz de encontrar a melhor estimativa, ótimo sinaliza que os resultados têm erros minimizados na maneira que veremos adiante, enquanto recursivo indica que não há a necessidade de guardar todas as medições anteriores e reprocessá-las a cada vez que uma nova informação é recebida, pois utiliza-se somente a informação mais recente.


Cabe ainda esclarecer dois conceitos anteriormente mencionados: ruído gaussiano e sistema linear. O primeiro trata-se de um
Essencialmente, o filtro de Kalman faz uso de duas funções: o predict e update.
Dada a equação

\begin{equation}
\hat{X}_k = K_k * Z_k + (1 - K_k) * \hat{X}_{k-1}
\end{equation}


Onde $\hat{X}_k$ é a estimativa do instante $k$, $K_k$ é o ganho de Kalman no instante $k$, $Z_k$ é o valor medido no instante $k$ e $\hat{X}_{k-1}$ é a estimativa anterior no instante $k-1$.

% TODO

\section{Controle para Realidade Virtual}

% * Qual a importância/valor de usar controles?
% * Tipos de Controles
% * Problemas/Imprecisão

\begin{figure}[ht]
\centering
\includegraphics[width=.6\textwidth]{images/gear_controller.jpg}
\caption{Filtragem do cursor de VR. Amostras ruidosas em vermelho e valor filtrado em azul.}
\label{fig:filter01}
\end{figure}

\section{Ferramenta de Visualização de Filtros} \label{sec:viztool}

Com o objetivo

\section{Resultados} \label{sec:results}

Nossa implementação em Unity foi executada em um aparelho Samsung S8 acoplado no óculos \textit{GearVR SM-R324}. Foi utilizado o controle oficial da Samsung que acompanha o óculos de realidade virtual \textit{GearVR}.

A figura \ref{fig:filter01} mostra um \textit{screenshot} da aplicação em Realidade Virtual com a filtragem de cursor ativa. O caminho do cursor é definido pela rotação atual do controler do \textit{GearVR}. A posição do cursor é calculada como o ponto que intercepta uma esfera de tamanho unitário e um raio partindo do cursor.

\begin{figure}[ht]
\centering
\includegraphics[width=.5\textwidth]{images/image_01.png}
\caption{Filtragem do cursor de VR. Amostras ruidosas em vermelho e valor filtrado em azul.}
\label{fig:filter01}
\end{figure}

\section{Conclusão} \label{sec:conclusion}

Pelos resultados obtidos, verificamos que a nossa aplicação Unity foi capaz de filtrar as posições ruidosas geradas pelo controller e garantir uma

% TODO

% \section{CD-ROMs and Printed Proceedings}

% In some conferences, the papers are published on CD-ROM while only the
% abstract is published in the printed Proceedings. In this case, authors are
% invited to prepare two final versions of the paper. One, complete, to be
% published on the CD and the other, containing only the first page, with
% abstract and ``resumo'' (for papers in Portuguese).

% \section{Sections and Paragraphs}

% Section titles must be in boldface, 13pt, flush left. There should be an extra
% 12 pt of space before each title. Section numbering is optional. The first
% paragraph of each section should not be indented, while the first lines of
% subsequent paragraphs should be indented by 1.27 cm.

% \subsection{Subsections}

% The subsection titles must be in boldface, 12pt, flush left.

% \section{Figures and Captions}\label{sec:figs}


% Figure and table captions should be centered if less than one line
% (Figure~\ref{fig:exampleFig1}), otherwise justified and indented by 0.8cm on
% both margins, as shown in Figure~\ref{fig:exampleFig2}. The caption font must
% be Helvetica, 10 point, boldface, with 6 points of space before and after each
% caption.

% \begin{figure}[ht]
% \centering
% \includegraphics[width=.5\textwidth]{fig1.jpg}
% \caption{A typical figure}
% \label{fig:exampleFig1}
% \end{figure}

% \begin{figure}[ht]
% \centering
% \includegraphics[width=.3\textwidth]{fig2.jpg}
% \caption{This figure is an example of a figure caption taking more than one
%   line and justified considering margins mentioned in Section~\ref{sec:figs}.}
% \label{fig:exampleFig2}
% \end{figure}

% In tables, try to avoid the use of colored or shaded backgrounds, and avoid
% thick, doubled, or unnecessary framing lines. When reporting empirical data,
% do not use more decimal digits than warranted by their precision and
% reproducibility. Table caption must be placed before the table (see Table 1)
% and the font used must also be Helvetica, 10 point, boldface, with 6 points of
% space before and after each caption.

% \begin{table}[ht]
% \centering
% \caption{Variables to be considered on the evaluation of interaction
%   techniques}
% \label{tab:exTable1}
% \includegraphics[width=.7\textwidth]{table.jpg}
% \end{table}

% \section{Images}

% All images and illustrations should be in black-and-white, or gray tones,
% excepting for the papers that will be electronically available (on CD-ROMs,
% internet, etc.). The image resolution on paper should be about 600 dpi for
% black-and-white images, and 150-300 dpi for grayscale images.  Do not include
% images with excessive resolution, as they may take hours to print, without any
% visible difference in the result.

% \section{References}

% Bibliographic references must be unambiguous and uniform.  We recommend giving
% the author names references in brackets, e.g. \cite{knuth:84},
% \cite{boulic:91}, and \cite{smith:99}.

% The references must be listed using 12 point font size, with 6 points of space
% before each reference. The first line of each reference should not be
% indented, while the subsequent should be indented by 0.5 cm.

\bibliographystyle{sbc}
\bibliography{sbc-template}

\end{document}
